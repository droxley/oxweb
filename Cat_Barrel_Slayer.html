<!DOCTYPE html>
<html>
<head>
  <title>Fluffy Cat Barrel Slayer</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #87CEEB;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    canvas {
      display: block;
      margin: 0 auto;
      background: #dff6ff;
      border-bottom: 5px solid #4CAF50;
    }

    #ui {
      margin-top: 8px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<canvas id="game" width="900" height="400"></canvas>

<div id="ui">
  ðŸ–± Left Click to Swing Sword |
  Score: <span id="score">0</span> |
  High Score: <span id="highScore">0</span>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;
let highScore = 0;
let gameSpeed = 3;
let barrels = [];
let gameOver = false;

const cat = {
  x: 120,
  y: 260,
  width: 60,
  height: 60,
  swinging: false,
  swingTimer: 0
};

function spawnBarrel() {
  barrels.push({
    x: canvas.width + 50,
    y: 280,
    size: 40
  });
}

setInterval(spawnBarrel, 1500);

canvas.addEventListener("mousedown", () => {
  if (!gameOver) {
    cat.swinging = true;
    cat.swingTimer = 10;
  }
});

function update() {
  if (gameOver) return;

  barrels.forEach((barrel, index) => {
    barrel.x -= gameSpeed;

    // Collision with cat (death)
    if (
      barrel.x < cat.x + cat.width &&
      barrel.x + barrel.size > cat.x &&
      cat.y + cat.height > barrel.y
    ) {
      die();
    }

    // Sword hit detection
    if (cat.swinging) {
      const swordReach = cat.x + cat.width + 40;
      if (
        barrel.x < swordReach &&
        barrel.x > cat.x &&
        barrel.y < cat.y + cat.height
      ) {
        barrels.splice(index, 1);
        score++;
        document.getElementById("score").textContent = score;
        gameSpeed += 0.2; // increase difficulty
      }
    }
  });

  if (cat.swingTimer > 0) {
    cat.swingTimer--;
  } else {
    cat.swinging = false;
  }
}

function drawCat() {
  // Ultra fluffy body
  ctx.fillStyle = "#FFF0F5";
  ctx.beginPath();
  ctx.arc(cat.x + 30, cat.y + 30, 35, 0, Math.PI * 2);
  ctx.fill();

  // Ears
  ctx.beginPath();
  ctx.arc(cat.x + 15, cat.y + 5, 15, 0, Math.PI * 2);
  ctx.arc(cat.x + 45, cat.y + 5, 15, 0, Math.PI * 2);
  ctx.fill();

  // Eyes
  ctx.fillStyle = "#000";
  ctx.beginPath();
  ctx.arc(cat.x + 20, cat.y + 30, 5, 0, Math.PI * 2);
  ctx.arc(cat.x + 40, cat.y + 30, 5, 0, Math.PI * 2);
  ctx.fill();

  // Sword
  if (cat.swinging) {
    ctx.fillStyle = "#ccc";
    ctx.fillRect(cat.x + 60, cat.y + 20, 50, 8);
  }
}

function drawBarrels() {
  ctx.fillStyle = "#8B4513";
  barrels.forEach(barrel => {
    ctx.beginPath();
    ctx.arc(barrel.x, barrel.y + 20, 20, 0, Math.PI * 2);
    ctx.fill();
  });
}

function drawGround() {
  ctx.fillStyle = "#4CAF50";
  ctx.fillRect(0, 320, canvas.width, 80);
}

function die() {
  gameOver = true;

  if (score > highScore) {
    highScore = score;
    document.getElementById("highScore").textContent = highScore;
  }

  setTimeout(() => {
    respawn();
  }, 1000);
}

function respawn() {
  score = 0;
  gameSpeed = 3;
  barrels = [];
  document.getElementById("score").textContent = score;
  gameOver = false;
}

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  update();
  drawGround();
  drawBarrels();
  drawCat();

  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
